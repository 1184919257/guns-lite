(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{76:function(t,s,a){"use strict";a.r(s);var n=a(0),o=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"定时任务管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定时任务管理","aria-hidden":"true"}},[t._v("#")]),t._v(" 定时任务管理")]),t._v(" "),a("p",[t._v("这两年做的项目和产品几乎多有定时任务管理的需求。\n常用的场景有：")]),t._v(" "),a("ul",[a("li",[t._v("定时给用户发送一些消息")]),t._v(" "),a("li",[t._v("定时进行一些报表的计算")]),t._v(" "),a("li",[t._v("定时去指定的接口get一些数据")]),t._v(" "),a("li",[t._v("定时降一些报表发送到指定的邮箱")])]),t._v(" "),a("p",[t._v("当然还有很多，没有必要意义列举")]),t._v(" "),a("h2",{attrs:{id:"需求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需求","aria-hidden":"true"}},[t._v("#")]),t._v(" 需求")]),t._v(" "),a("p",[t._v("定时任务的需求通常是这样的\n1，需要添加一个定时任务，做一些事情。但是什么时候做要我自己配置，而且还想配置一些参数进去，比如我想定时给指定的email发送邮件.\n2，可以临时禁用一个任务。\n3，看定时任务执行的历史日志。")]),t._v(" "),a("h2",{attrs:{id:"具体用法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#具体用法","aria-hidden":"true"}},[t._v("#")]),t._v(" 具体用法")]),t._v(" "),a("p",[t._v("guns-lite对定时任务管理功能的实现如下。")]),t._v(" "),a("h2",{attrs:{id:"表结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#表结构","aria-hidden":"true"}},[t._v("#")]),t._v(" 表结构")]),t._v(" "),a("p",[t._v("guns-lite提供了两个表：t_sys_task（任务）和t_sys_task_log(任务执行日志)")]),t._v(" "),a("ul",[a("li",[t._v("t_sys_task")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("t_sys_task"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("bigint")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("64")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'自增主键'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("varchar")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("50")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'任务名'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("job_group"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("varchar")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("50")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'任务组'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("job_class"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("varchar")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("255")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'执行类'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("note"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("varchar")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("255")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'任务说明'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("cron"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("varchar")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("50")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'定时规则'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),a("span",{attrs:{class:"token keyword"}},[t._v("data")]),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("text")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'执行参数'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("exec_at"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("datetime")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'执行时间'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("exec_result"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("text")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'执行结果'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("disabled"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("tinyint")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'是否禁用'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("createtime"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("datetime")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("NULL")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("creator"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("bigint")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("20")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("NULL")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("concurrent"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("tinyint")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("4")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'是否允许并发'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("PRIMARY")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("ENGINE")]),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token keyword"}},[t._v("InnoDB")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("CHARSET")]),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n")])])]),a("ul",[a("li",[t._v("t_sys_task_log")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("t_sys_task_log"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("bigint")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("64")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'自增主键'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("varchar")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("50")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'任务名'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("exec_at"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("datetime")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'执行时间'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("exec_success"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("11")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'执行结果（成功:1、失败:0)'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("job_exception"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("varchar")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("255")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'抛出异常'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id_task"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("bigint")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("20")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("NULL")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("PRIMARY")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),a("span",{attrs:{class:"token punctuation"}},[t._v("`")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("ENGINE")]),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token keyword"}},[t._v("InnoDB")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("CHARSET")]),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n")])])]),a("h3",{attrs:{id:"创建一个定时任务类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建一个定时任务类","aria-hidden":"true"}},[t._v("#")]),t._v(" 创建一个定时任务类")]),t._v(" "),a("p",[t._v("比如我创建一个测试任务类")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("package")]),t._v(" cn"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("enilu"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("guns"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("service"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("job"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" cn"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("enilu"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("guns"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("service"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("JobExecuter"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" com"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("alibaba"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fastjson"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("JSON"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" org"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stereotype"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("HelloJob")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("JobExecuter")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("execute")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Map"),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Object"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" dataMap"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" Exception "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        System"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("println")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"输出配置参数如下 :"')]),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("JSON"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("toJSONString")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dataMap"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        System"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("println")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"这里可以编写任意其他业务逻辑"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("h3",{attrs:{id:"页面配置一个定时任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#页面配置一个定时任务","aria-hidden":"true"}},[t._v("#")]),t._v(" 页面配置一个定时任务")]),t._v(" "),a("p",[t._v("在任务管理页面可以增上改查一个定时任务，还可以禁用、启用定时任务")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("添加定时任务\n"),a("img",{attrs:{src:"task_add.png",alt:"task-add"}})])]),t._v(" "),a("li",[a("p",[t._v("定时任务列表\n"),a("img",{attrs:{src:"task_list.png",alt:"task-list"}})])]),t._v(" "),a("li",[a("p",[t._v("查看定时任务执行历史日志\n"),a("img",{attrs:{src:"task_log.png",alt:"task-log"}})])])])])}],!1,null,null,null);o.options.__file="task.md";s.default=o.exports}}]);